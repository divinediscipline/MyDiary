{"version":3,"sources":["../../../server/routes/src/app.js"],"names":["require","Client","dotenv","config","app","use","bodyParser","json","urlencoded","extended","entries","get","req","res","status","message","v1","post","console","log","body","client","connect","then","sql","params","query","result","catch","err","send","PORT","process","env","listen"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AAGA;;;;;;eAEmBA,QAAQ,IAAR,C;IAAXC,M,YAAAA,M;;AAHR;;;AAKAC,iBAAOC,MAAP;;AAEA;AACA,IAAMC,MAAM,wBAAZ;;AAGA;AACAA,IAAIC,GAAJ,CAAQ,sBAAO,KAAP,CAAR;;AAEA;AACAD,IAAIC,GAAJ,CAAQC,qBAAWC,IAAX,EAAR;AACAH,IAAIC,GAAJ,CAAQC,qBAAWE,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACAL,IAAIC,GAAJ,CAAQ,SAAR,EAAmBK,iBAAnB;;AAGAN,IAAIO,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN;AAAA,SAAcA,IAAIC,MAAJ,CAAW,GAAX,EAAgBP,IAAhB,CAAqB;AAC9CQ,aAAS,4BADqC;AAE9CC,QAAI;AAF0C,GAArB,CAAd;AAAA,CAAb;;AAKAZ,IAAIO,GAAJ,CAAQ,KAAR,EAAe,UAACC,GAAD,EAAMC,GAAN;AAAA,SAAcA,IAAIC,MAAJ,CAAW,GAAX,EAAgBP,IAAhB,CAAqB;AAChDQ,aAAS;AADuC,GAArB,CAAd;AAAA,CAAf;;AAKA;AACAX,IAAIa,IAAJ,CAAS,OAAT,EAAkB,UAACL,GAAD,EAAMC,GAAN,EAAc;AAC9BK,UAAQC,GAAR,CAAY,WAAZ,EAAyBP,IAAIQ,IAA7B;;AAEA,MAAMC,SAAS,IAAIpB,MAAJ,EAAf;AACAoB,SAAOC,OAAP,GACGC,IADH,CACQ,YAAM;AACVL,YAAQC,GAAR,CAAY,qBAAZ;AACA,QAAMK,MAAM,uDAAZ;AACA,QAAMC,SAAS,CAAC,MAAD,EAAS,MAAT,CAAf;AACA,WAAOJ,OAAOK,KAAP,CAAaF,GAAb,EAAkBC,MAAlB,CAAP;AACD,GANH,EAOGF,IAPH,CAOQ,UAACI,MAAD,EAAY;AAChBT,YAAQC,GAAR,CAAY,SAAZ,EAAuBQ,MAAvB;AACD,GATH,EAUGC,KAVH,CAUS,UAACC,GAAD,EAAS;AACdX,YAAQC,GAAR,CAAY,KAAZ,EAAmBU,GAAnB;AAED,GAbH;AAcAhB,MAAIiB,IAAJ;AACD,CAnBD;;AAqBA,IAAMC,OAAOC,QAAQC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;;AAEA3B,IAAI8B,MAAJ,CAAWH,IAAX,EAAiB,YAAM;AACrBb,UAAQC,GAAR,0BAAmCY,IAAnC;AACD,CAFD;;kBAIe3B,G","file":"app.js","sourcesContent":["import express from 'express';\r\nimport logger from 'morgan';\r\nimport bodyParser from 'body-parser';\r\nimport dotenv from 'dotenv';\r\n\r\n// load routes\r\nimport entries from '../entries';\r\n\r\nconst { Client } = require('pg');\r\n\r\ndotenv.config();\r\n\r\n// Set up the express app\r\nconst app = express();\r\n\r\n\r\n// Log requests to the console.\r\napp.use(logger('dev'));\r\n\r\n// Parse incoming requests data and use loaded routes\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use('/api/v1', entries);\r\n\r\n\r\napp.get('/', (req, res) => res.status(200).json({\r\n  message: 'Welcome to the myDiary API',\r\n  v1: '/api/v1',\r\n}));\r\n\r\napp.get('/v1', (req, res) => res.status(200).json({\r\n  message: 'Welcome to version 1 of the myDiary API',\r\n}));\r\n\r\n\r\n// trying to input data into postgres database\r\napp.post('/test', (req, res) => {\r\n  console.log('Post body', req.body);\r\n\r\n  const client = new Client();\r\n  client.connect()\r\n    .then(() => {\r\n      console.log('connection complete');\r\n      const sql = 'INSERT INTO entries (title, details) VALUES ( $1, $2)';\r\n      const params = ['aaaa', 'bbbb'];\r\n      return client.query(sql, params);\r\n    })\r\n    .then((result) => {\r\n      console.log('result?', result);\r\n    })\r\n    .catch((err) => {\r\n      console.log('err', err);\r\n\r\n    });\r\n  res.send();\r\n});\r\n\r\nconst PORT = process.env.PORT || 5000;\r\n\r\napp.listen(PORT, () => {\r\n  console.log(`app started on port ${PORT}`);\r\n});\r\n\r\nexport default app;\r\n"]}